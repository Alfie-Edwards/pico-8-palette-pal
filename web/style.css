@font-face {
  font-family: "P8SCII";
  src: url("./fonts/P8SCII.ttf") format("truetype");
  font-display: swap;
}

:root {
    --px: 4px;
    --px2: 8px;
    --col-0: #000000;
    --col-1: #1D2B53;
    --col-2: #7E2553;
    --col-3: #008751;
    --col-4: #AB5236;
    --col-5: #5F574F;
    --col-6: #C2C3C7;
    --col-7: #FFF1E8;
    --col-8: #FF004D;
    --col-9: #FFA300;
    --col-10: #FFEC27;
    --col-11: #00E436;
    --col-12: #29ADFF;
    --col-13: #83769C;
    --col-14: #FF77A8;
    --col-15: #FFCCAA;
    --col-neg-16: #291814;
    --col-neg-15: #111D35;
    --col-neg-14: #422136;
    --col-neg-13: #125359;
    --col-neg-12: #742F29;
    --col-neg-11: #49333B;
    --col-neg-10: #A28879;
    --col-neg-9: #F3EF7D;
    --col-neg-8: #BE1250;
    --col-neg-7: #FF6C24;
    --col-neg-6: #A8E72E;
    --col-neg-5: #00B543;
    --col-neg-4: #065AB5;
    --col-neg-3: #754665;
    --col-neg-2: #FF6E59;
    --col-neg-1: #FF9D81;
}

.pixel-corners-2 {
    clip-path: polygon(
        var(--px2) 0,
        calc(100% - var(--px2)) 0,

        calc(100% - var(--px2)) var(--px),
        calc(100% - var(--px)) var(--px),
        calc(100% - var(--px)) var(--px2),
        100% var(--px2),

        100% calc(100% - var(--px2)),

        calc(100% - var(--px)) calc(100% - var(--px2)),
        calc(100% - var(--px)) calc(100% - var(--px)),
        calc(100% - var(--px2)) calc(100% - var(--px)),
        calc(100% - var(--px2)) 100%,

        var(--px2) 100%,

        var(--px2) calc(100% - var(--px)),
        var(--px) calc(100% - var(--px)),
        var(--px) calc(100% - var(--px2)),
        0 calc(100% - var(--px2)),

        0 var(--px2),

        var(--px) var(--px2),
        var(--px) var(--px),
        var(--px2) var(--px),
        var(--px2) 0
    );
}

.pixel-corners-1 {
    clip-path: polygon(
        var(--px) 0,
        calc(100% - var(--px)) 0,
        calc(100% - var(--px)) var(--px),
        100% var(--px),
        100% calc(100% - var(--px)),
        calc(100% - var(--px)) calc(100% - var(--px)),
        calc(100% - var(--px)) 100%,
        var(--px) 100%,
        var(--px) calc(100% - var(--px)),
        0 calc(100% - var(--px)),
        0 var(--px),
        var(--px) var(--px)
    );
}

html {
    margin: 0;
    background-color: var(--col-neg-14);
    padding: 16px;
    height: calc(100% - 32px);
    width: calc(100% - 32px);
}

body {
    margin: 0;
    display: flex;
    flex-direction: row;
    gap: 16px;
    width: 100%;
    height: 100%;
    min-height: 657px;
}

* {
    font-family: "P8SCII";
    -webkit-font-smoothing: none;
    font-smooth: never;
    text-rendering: geometricPrecision;
    color: var(--col-7);
}

canvas {
    image-rendering: pixelated;
    touch-action: none;
}

input {
    border: 0px;
    background-color: var(--col-7);
    color: var(--col-0);
    padding: 4px;
    margin: 0px;
}

[hidden] {
  display: none !important;
}

.ui-panel {
    background-color: var(--col-0);
}

.ui-panel > section > * {
    box-sizing: border-box;
}

#tab-panel {
    display: flex;
    flex-direction: column;
    height: calc(100% - 32px);
    margin-top: 16px;
    gap: 16px;
    width: 64px;
}

.tab-pane {
    display: none;
    height: 100%;
    width: 100%;
    flex-direction: column;
    justify-content: flex-end;
    gap: 16px;
    box-sizing: border-box;
    min-width: 0;
    min-height: 0;
    padding: 16px;
}

#tab-sheet:checked  ~ * .tab-pane[data-tab="sheet"],
#tab-sheet:checked  ~ * .tab-pane[data-tab="sheet"],
#tab-sprites:checked ~ * .tab-pane[data-tab="sprites"],
#tab-sprites:checked ~ * .tab-pane[data-tab="sprites"],
#tab-scenes:checked ~ * .tab-pane[data-tab="scenes"],
#tab-scenes:checked ~ * .tab-pane[data-tab="scenes"],
#tab-export:checked ~ * .tab-pane[data-tab="export"],
#tab-export:checked ~ * .tab-pane[data-tab="export"] {
  display: flex;
}

#tab-sheet:checked  ~ * label[for="tab-sheet"],
#tab-sprites:checked ~ * label[for="tab-sprites"],
#tab-scenes:checked ~ * label[for="tab-scenes"],
#tab-export:checked ~ * label[for="tab-export"] {
  background: var(--col-0);
  margin-left: 0px;
}

.ui-tab {
    background-color: var(--col-neg-16);
    padding: 16px;
    margin: 8px -30px 8px 0px;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.ui-tab:has(input:checked) {
    background: var(--col-0);
}

.ui-tab:hover {
    transform: translate(-4px, 0px);
}

.ui-tab > span {
    transform: rotate(-90deg);
}

#left-panel {
    flex-grow: 1;
}

#right-panel {
    width: min-content;
}

#interactive-image-box {
    flex-grow: 1;
    min-height: 128px;
    position: relative;
    overflow: hidden;
    align-self: center;
    width: fit-content;
}

#interactive-image {
    width: 100%;
    height: 100%;
}

.button {
  font-size: 14px;
  background: var(--col-neg-11);
  padding: 16px;
  cursor: pointer;
  text-align: center;
  border: none;
}

.button:hover {
  background: var(--col-neg-3);
}

.toolbar {
    display: flex;
    flex-direction: row;
    gap: 16px;
    height: 128px
}

.item-display {
    display: flex;
    overflow-y: scroll;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 16px;
    flex-grow: 1;
    align-content: flex-start;
    min-width: 416px; /* 3 items wide: 128 * 3 + 16 * 2 */
    height: 100%;
}

.item-display > .image-container {
    width: 128px;
    height: 128px;
    box-sizing: border-box;
}

.item-display > .button {
    width: 128px;
    height: 128px;
}

.edit-grid {
    display: grid;
    grid-template-columns: auto 64px;
    gap: 8px;
    align-items: center;
    height: fit-content;
}

.image-container {
    position: relative;
    display: flex;
    height: 100%;
    width: 100%;
    min-width: 0px;
    min-height: 0px;
    border-style: dashed;
    border-color: var(--col-7);
    border-width: 0px;

    background: -webkit-linear-gradient(45deg, rgba(0, 0, 0, 0.0980392) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.0980392) 75%, rgba(0, 0, 0, 0.0980392) 0), -webkit-linear-gradient(45deg, rgba(0, 0, 0, 0.0980392) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.0980392) 75%, rgba(0, 0, 0, 0.0980392) 0), white;
    background: -moz-linear-gradient(45deg, rgba(0, 0, 0, 0.0980392) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.0980392) 75%, rgba(0, 0, 0, 0.0980392) 0), -moz-linear-gradient(45deg, rgba(0, 0, 0, 0.0980392) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.0980392) 75%, rgba(0, 0, 0, 0.0980392) 0), white;
    background: linear-gradient(45deg, rgba(0, 0, 0, 0.0980392) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.0980392) 75%, rgba(0, 0, 0, 0.0980392) 0), linear-gradient(45deg, rgba(0, 0, 0, 0.0980392) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.0980392) 75%, rgba(0, 0, 0, 0.0980392) 0), white;
    background-repeat: repeat, repeat;
    background-position: 0px 0, 5px 5px;
    -webkit-transform-origin: 0 0 0;
    transform-origin: 0 0 0;
    -webkit-background-clip: content-box;
    background-clip: content-box;
    -webkit-background-size: 10px 10px, 10px 10px;
    background-size: 10px 10px, 10px 10px;
}

.image-container > canvas {
  height: 100%;
  width: 100%;
  object-fit: contain;
}

.hline {
    width: calc(100% + 32px);
    border-top: 6px dashed var(--col-neg-16);
    margin: 0px -16px;
}

.vline {
    height: calc(100% + 32px);
    border-left: 6px dashed var(--col-neg-16);
    margin: -16px 0px;
}

.minimap {
    aspect-ratio: 1;
}

.image-container:has(.minimap) {
    flex-shrink: 0;
    width: max-content;
}

.selector-box {
    background-color: transparent; box-shadow:
    0 0 0 1px var(--col-7),
    0 0 0 2px var(--col-0);
    position: absolute;
    min-width: 1px;
    min-height: 1px;
}

.selector-anchor {
    background-color: var(--col-7);
    border: 1px solid var(--col-0);
    position: absolute;
    width: 13px;
    height: 13px;
    margin-left: -6px;
    margin-top: -6px;
}

.h-box {
    position: relative;
    display: flex;
    flex-direction: row;
    gap: 16px;
    width: 100%;
    height: 100%;
}

.v-box {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 16px;
    width: 100%;
    height: 100%;
}

#drag-ghost {
    position: fixed;
    pointer-events: none;
    opacity: 0.5;
}

.drag-preview {
    display: flex;
    position: absolute;
    width:40%;
    height: 40%;
    margin: 5%;
    padding: 25%;
    opacity: 0.75;
    background: var(--col-neg-11);
    align-items: center;
    text-align: center;
    pointer-events: none;
}

.drag-preview::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;

  padding: 5px;
  background:
    repeating-linear-gradient(90deg, var(--col-7) 0 8px, transparent 8px 16px),
    repeating-linear-gradient(180deg, var(--col-7) 0 8px, transparent 8px 16px),
    repeating-linear-gradient(270deg, var(--col-7) 0 8px, transparent 8px 16px),
    repeating-linear-gradient(0deg, var(--col-7) 0 8px, transparent 8px 16px);
  background-size: 100% 5px, 5px 100%, 100% 5px, 5px 100%;
  background-position: 0 0, 100% 0, 0 100%, 0 0;
  background-repeat: no-repeat;
  animation: marching-ants 1s linear infinite;
}

@keyframes marching-ants {
  to {
    background-position: 16px 0, 100% 16px, -16px 100%, 0 -16px;
  }
}

#sprite-component-list > .h-box {
    height: 128px;
}

#sprite-component-list > .h-box > .image-container {
    width: 128px;
    height: 128px;
    flex-shrink: 0;
    border-style: dashed;
    border-width: 0px;
    box-sizing: border-box;
}

#sprite-component-list > .h-box > .v-box > * {
    flex-grow: 1;
}

